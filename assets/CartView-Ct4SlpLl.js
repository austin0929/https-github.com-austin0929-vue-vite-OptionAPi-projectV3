import{C as p}from"./cartStore-DAzxVWyi.js";import{a as g,_ as x,o as n,c as a,b as t,x as $,m as k,d as b,f as _,g as m,F as h,v as f,t as i,B as v,C as y,r as C}from"./index-B24p_j4Q.js";import{M as V}from"./modalMixins-Ctgg6bHJ.js";import{V as w}from"./VueLoading-D_ar9Dhk.js";import"./index-DoQuGAlw.js";var T={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david555",BASE_URL:"/vue3-OptionAPi-projectV3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:M,VITE_APP_PATH:E}=T,L={data(){return{modal:null}},methods:{...g(p,["getCart"]),delAllCart(){const o=`${M}/api/${E}/carts`;this.$http.delete(o).then(s=>{s.data.success&&(this.hideModal(),this.getCart())}).catch(s=>{s.response.data.message&&this.$swal("失敗","刪除產品失敗","error")})}},mixins:[V]},D={class:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"myModal"},R={class:"modal-dialog",role:"document"},I={class:"modal-content"},U=$('<div class="modal-header bg-primary"><h5 class="modal-title text-light" id="exampleModalLabel">刪除所有產品</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body text-center"><i class="bi bi-exclamation-triangle-fill text-secondary" style="font-size:4rem;"></i><p>確定刪除所有產品品項嗎?</p></div>',2),j={class:"modal-footer mx-auto"},B=t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal"},"取消",-1);function S(o,s,d,P,c,l){return n(),a("div",D,[t("div",R,[t("div",I,[U,t("div",j,[B,t("button",{type:"button",class:"btn btn-primary",onClick:s[0]||(s[0]=(...u)=>l.delAllCart&&l.delAllCart(...u))},"確定")])])])],512)}const N=x(L,[["render",S]]);var O={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david555",BASE_URL:"/vue3-OptionAPi-projectV3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:q,VITE_APP_PATH:H}=O,Q={components:{DelAllCartModal:N,VueLoading:w},data(){return{isAddOrDelNum:!1,cartData:{},coupon:"happy",isLoading:!1}},computed:{...k(p,["carts","totalPrice"])},methods:{...g(p,["getCart","delCartProduct","delAllCart","updateQty"]),addCoupon(){const o=`${q}/api/${H}/coupon`,s={code:this.coupon};this.$http.post(o,{data:s}).then(d=>{d.data.success&&(this.$swal("成功","成功加入優惠券","success"),this.getCart())}).catch(d=>{d.response.data.message&&this.$swal("失敗","找不到優惠券","error")})},delAllCart(){if(this.carts.length===0){this.$swal("失敗","購物車內無任何產品","error");return}this.$refs.delAllCartModal.showModal()},toCheckout(){this.$router.push("/checkout")}},mounted(){this.getCart(),this.isLoading=!0,setTimeout(()=>{this.isLoading=!1},1e3)}},F={class:"layoutBanner mb-md-5 mb-3"},z={class:"container"},G={class:"row justify-content-center my-auto"},J={class:"col-md-4 text-center layout-Banner-Text"},K=t("h2",{class:"fw-bold mb-3 text-light h1"},"購物車",-1),W={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},X={class:"breadcrumb d-flex justify-content-center"},Y={class:"breadcrumb-item"},Z=t("li",{class:"breadcrumb-item text-light","aria-current":"page"}," 購物車 ",-1),tt={key:0,class:"container"},et={class:"row justify-content-center"},st={class:"col-md-8"},ot={class:"border text-center py-3 rounded custom-btn-primary",style:{"box-shadow":`0 4px 6px rgba(0, 0, 0, 0.1),\r
                0 1px 3px rgba(0, 0, 0, 0.08)`}},lt=t("h3",{class:"mb-3"},"購物車清單",-1),nt=t("i",{class:"bi bi-box-seam h1 mb-3 d-block"},null,-1),at=t("p",{class:"mb-3"},"目前購物車內無產品，請先選購!",-1),it={key:1,class:"container"},dt={class:"row mb-md-5 mb-3"},ct={class:"col-md-8"},rt={class:"table border"},ut=t("thead",null,[t("tr",null,[t("th"),t("th",null,"產品"),t("th",{class:"table-price"},"單價"),t("th",null,"數量"),t("th",{class:"text-end"},"總價")])],-1),_t={class:"text-center"},ht=["onClick"],pt=t("i",{class:"bi bi-trash del-icon"},null,-1),bt=[pt],mt={class:"d-flex align-items-center"},ft=["src"],vt={class:"mt-2 mt-lg-0 table-cart-font"},yt={class:"text-primary table-cart-font table-price"},Ct={class:"d-flex"},gt=["onClick"],xt=t("i",{class:"bi bi-dash"},null,-1),Pt=[xt],At=["onUpdate:modelValue"],$t=["onClick"],kt=t("i",{class:"bi bi-plus"},null,-1),Vt=[kt],wt={class:"text-primary text-end table-cart-font"},Tt={class:"text-end custom-btn-primary"},Mt=["disabled"],Et={class:"col-md-4 mt-4 mt-md-0"},Lt={class:"d-flex justify-content-between custom-btn-dark"},Dt=t("h2",{class:"h4"},"購物車清單",-1),Rt=t("hr",null,null,-1),It=t("hr",null,null,-1),Ut={class:"d-flex justify-content-between mb-1"},jt=t("span",null,"小計",-1),Bt={class:"d-flex justify-content-between mb-4"},St=t("span",{class:"fw-bold h5"},"總計",-1),Nt={class:"fw-bold h6 text-primary"},Ot={class:"input-group mb-3 custom-btn-primary"},qt=["disabled"];function Ht(o,s,d,P,c,l){const u=C("VueLoading"),A=C("DelAllCartModal");return n(),a(h,null,[b(u,{active:c.isLoading},null,8,["active"]),t("div",null,[t("div",F,[t("div",z,[t("div",G,[t("div",J,[K,t("nav",W,[t("ol",X,[t("li",Y,[t("a",{href:"#",class:"layout-banner-txt-Hover",onClick:s[0]||(s[0]=_(()=>{},["prevent"]))},"首頁")]),Z])])])])])])]),o.carts.length===0?(n(),a("div",tt,[t("div",et,[t("div",st,[t("div",ot,[lt,nt,at,t("button",{type:"button",class:"btn",onClick:s[1]||(s[1]=_(e=>o.$router.push("/products"),["prevent"]))}," 開始購物 ")])])])])):m("",!0),o.carts.length?(n(),a("div",it,[t("div",dt,[t("div",ct,[t("div",null,[t("table",rt,[ut,t("tbody",null,[(n(!0),a(h,null,f(o.carts,e=>(n(),a("tr",{key:e.id},[t("td",_t,[t("a",{href:"#",onClick:_(r=>o.delCartProduct(e),["prevent"])},bt,8,ht)]),t("td",null,[t("div",mt,[t("img",{class:"object-fit-cover d-none d-lg-inline-block me-3",height:"50",width:"100",alt:"購物車產品圖",src:e.product.imageUrl},null,8,ft),t("h2",vt,i(e.product.title),1)])]),t("td",yt," $ "+i(e.product.origin_price),1),t("td",null,[t("div",Ct,[t("button",{class:"qtyButton",type:"button",onClick:r=>o.updateQty(e,!1)},Pt,8,gt),v(t("input",{type:"number",class:"text-center my-auto qtyInput","aria-label":"Example text with button addon","onUpdate:modelValue":r=>e.qty=r,value:"1",readonly:""},null,8,At),[[y,e.qty,void 0,{number:!0}]]),t("button",{class:"qtyButton",type:"button",onClick:r=>o.updateQty(e,!0)},Vt,8,$t)])]),t("td",wt," $ "+i(e.product.price*e.qty),1)]))),128))])]),t("div",Tt,[t("button",{class:"btn",disabled:o.carts.length===0,type:"button",onClick:s[2]||(s[2]=(...e)=>l.toCheckout&&l.toCheckout(...e))}," 結帳去 ",8,Mt)])])]),t("div",Et,[t("div",Lt,[Dt,t("button",{class:"btn",type:"button",onClick:s[3]||(s[3]=(...e)=>l.delAllCart&&l.delAllCart(...e))}," 清空購物車 ")]),Rt,(n(!0),a(h,null,f(o.carts,e=>(n(),a("div",{class:"d-flex justify-content-between mb-1",key:e.name},[t("span",null,i(e.product.title),1),t("span",null,"NT$ "+i(e.product.origin_price),1)]))),128)),It,t("div",Ut,[jt,t("span",null,"NT$ "+i(o.totalPrice.total),1)]),t("div",Bt,[St,t("span",Nt,"NT$ "+i(o.totalPrice.final_total),1)]),t("div",Ot,[v(t("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":s[4]||(s[4]=e=>c.coupon=e),"aria-label":"Recipient's username","aria-describedby":"button-addon2"},null,512),[[y,c.coupon]]),t("button",{class:"btn",type:"button",id:"button-addon2",disabled:o.carts.length===0,onClick:s[5]||(s[5]=(...e)=>l.addCoupon&&l.addCoupon(...e))}," 使用 ",8,qt)])])])])):m("",!0),b(A,{ref:"delAllCartModal"},null,512)],64)}const Kt=x(Q,[["render",Ht]]);export{Kt as default};
