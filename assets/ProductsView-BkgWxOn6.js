import{P as L}from"./PaginationComponent-BW3nAPm6.js";import{C as S}from"./cartStore-DAzxVWyi.js";import{B as b}from"./bookmarkStore-CYqAAoJX.js";import{_ as B,a as v,m as A,c as n,d,b as t,f as h,w as m,F as p,v as f,B as P,C as T,D as $,r as g,o as l,e as k,t as u,y as D}from"./index-B24p_j4Q.js";import{V as E}from"./VueLoading-D_ar9Dhk.js";import"./index-DoQuGAlw.js";var U={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"david555",BASE_URL:"/vue3-OptionAPi-projectV3/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:y,VITE_APP_PATH:w}=U,I={components:{Pagination:L,VueLoading:E},data(){return{products:[],searchKeyword:"",selectPrice:"價格",pagination:{},isLoading:!1,categories:["漢堡","披薩","飲料","牛排","沙拉"]}},methods:{...v(b,["getBookmark","addBookmark","isSelected"]),...v(S,["addToCart"]),getProducts(o=1){this.isLoading=!0;const{category:s=""}=this.$route.query,i=`${y}/api/${w}/products?category=${s}&page=${o}`;this.$http.get(i).then(r=>{r.data.success&&(this.searchKeyword="",this.products=r.data.products,this.pagination=r.data.pagination,setTimeout(()=>{this.isLoading=!1},800))}).catch(r=>{r.response.data.message&&this.$swal("錯誤","你所查看的API不存在","error")})},searchProduct(){const o=`${y}/api/${w}/products/all`;this.$http.get(o).then(s=>{this.products=s.data.products;const i=this.products.filter(r=>r.title.trim().toLowerCase().includes(this.searchKeyword.toLowerCase()));i.length>0?this.products=i:this.$swal("錯誤","抱歉，沒有找到符合條件的產品。","error")}).catch(s=>{s.response.data.message&&this.$swal("錯誤","你所查看的API不存在","error")})},sortedProducts(){let o="";this.products.sort((s,i)=>this.selectPrice==="1"?o=s.price-i.price:this.selectPrice==="2"?o=i.price-s.price:o)}},computed:{...A(b,["bookmark","bookmarkDate"]),sortPrice(){return this.sortedProducts()}},watch:{"$route.query":{handler(){this.getProducts()},deep:!0}},created(){this.getProducts()}},H={class:"layoutBanner mb-md-5 mb-3"},j={class:"container"},K={class:"row justify-content-center my-auto"},R={class:"col-md-4 text-center layout-Banner-Text"},M=t("h2",{class:"fw-bold mb-3 text-light h1"},"產品列表",-1),N={style:{"--bs-breadcrumb-divider":"'>'"},"aria-label":"breadcrumb"},O={class:"breadcrumb d-flex justify-content-center"},q={class:"breadcrumb-item"},F=t("li",{class:"breadcrumb-item text-light","aria-current":"page"}," 產品列表 ",-1),z={class:"container"},G={class:"row"},J={class:"col-lg-3 mb-3"},Q={class:"bg-info text-secondary p-4 rounded border"},W=t("h2",{class:"fw-bold h5"},"產品列表",-1),X=t("hr",null,null,-1),Y={class:"px-0"},Z={class:"mb-3"},tt={class:"col-lg-9"},et={class:"searchAndSort"},st={class:"d-flex mb-3"},ot={class:"productSelect ms-auto mb-3"},it=t("option",{selected:"",disabled:""},"價格",-1),rt=t("option",{value:"1"},"低到高",-1),at=t("option",{value:"2"},"高到低",-1),ct=[it,rt,at],nt={class:"row mb-md-5 mb-3"},dt={class:"card border p-2 mb-4 position-relative"},lt=["src"],ut={class:"card-body p-0"},_t={class:"text-dark"},ht={class:"card-text text-muted mb-2 text-truncate"},mt={class:"d-flex justify-content-between align-items-center"},pt={class:"text-primary fw-bold me-2"},gt={class:"mb-0 text-muted text-end d-inline-block"},bt={class:"custom-btn-primary"},vt=["onClick"],ft=t("i",{class:"bi bi-handbag"},null,-1),Pt=[ft],kt=["onClick"];function yt(o,s,i,r,a,c){const x=g("VueLoading"),_=g("router-link"),C=g("Pagination");return l(),n(p,null,[d(x,{active:a.isLoading},null,8,["active"]),t("div",null,[t("div",H,[t("div",j,[t("div",K,[t("div",R,[M,t("nav",N,[t("ol",O,[t("li",q,[t("a",{href:"#",class:"layout-banner-txt-Hover",onClick:s[0]||(s[0]=h(()=>{},["prevent"]))},"首頁")]),F])])])])])])]),t("div",z,[t("div",G,[t("div",J,[t("div",Q,[W,X,t("ul",Y,[t("li",Z,[d(_,{class:"productLinkHover",to:"/products"},{default:m(()=>[k("全部產品")]),_:1})]),(l(!0),n(p,null,f(a.categories,e=>(l(),n("li",{class:"mb-3",key:e},[d(_,{class:"productLinkHover",to:`/products?category=${e}`},{default:m(()=>[k(u(e),1)]),_:2},1032,["to"])]))),128))])])]),t("div",tt,[t("div",et,[t("div",st,[P(t("input",{class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>a.searchKeyword=e),type:"search",placeholder:"產品搜尋",onBlur:s[2]||(s[2]=(...e)=>c.searchProduct&&c.searchProduct(...e))},null,544),[[T,a.searchKeyword,void 0,{trim:!0}]])]),t("div",ot,[P(t("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":s[3]||(s[3]=e=>a.selectPrice=e),onChange:s[4]||(s[4]=(...e)=>c.sortPrice&&c.sortPrice(...e))},ct,544),[[$,a.selectPrice]])])]),t("div",nt,[(l(!0),n(p,null,f(a.products,e=>(l(),n("div",{class:"col-lg-4 col-md-6",key:e.id},[t("div",dt,[d(_,{to:`/product/${e.id}`},{default:m(()=>[t("img",{height:"200",src:e.imageUrl,class:"card-img-top rounded mb-3 object-fit-cover cardHover",alt:"產品圖片"},null,8,lt),t("div",ut,[t("h4",_t,u(e.title),1),t("p",ht,u(e.description),1),t("div",mt,[t("div",null,[t("span",pt,"$ "+u(e.origin_price),1),t("p",gt,[t("del",null,"$"+u(e.origin_price),1)])]),t("div",bt,[t("a",{href:"#",class:"btn",onClick:h(V=>o.addToCart(e),["prevent"])},Pt,8,vt)])])])]),_:2},1032,["to"]),t("div",null,[t("a",{href:"#",class:"p-2 bookmark-icon",onClick:s[5]||(s[5]=h(()=>{},["prevent"]))},[t("i",{class:D(["bi bi-heart-fill",{"bookmark-selected":o.isSelected(e.id)}]),onClick:V=>o.addBookmark(e)},null,10,kt)])])])]))),128))])])])]),d(C,{pages:a.pagination,onUpdatePage:c.getProducts},null,8,["pages","onUpdatePage"])],64)}const Bt=B(I,[["render",yt]]);export{Bt as default};
